/**********************************************************************
[[フェーズ:GameTackle1プログラム(Phase_GameTackle1.cpp)]]
	作者：奥田　真規

	フェーズ：GameTackle1に関するプログラム
***********************************************************************/
#include"../Core/main.h"	
#include "../Core/fade.h"
#include "../Core/input.h"
#include "../Core/sound.h"
#include "../Core/camera.h"
#include "../Core/debugproc.h"

#include "Phase_GameTackle1.h"	
#include "Phase_GameTackle2.h"

#include "../player.h"

//---------------------------------------------------------------------
//	マクロ定義(同cpp内限定)
//---------------------------------------------------------------------

//---------------------------------------------------------------------
//	構造体、列挙体、共用体宣言(同cpp内限定)
//---------------------------------------------------------------------

//---------------------------------------------------------------------
//	プロトタイプ宣言(同cpp内限定)
//---------------------------------------------------------------------

//---------------------------------------------------------------------
//	グローバル変数
//---------------------------------------------------------------------

// 画面遷移基本関数群をまとめておく
static PHASE_FUNC g_PhaseFunc = { InitGameTackle1,UninitGameTackle1,UpdateGameTackle1,DrawGameTackle1 };

/*=====================================================================
GameTackle1更新関数
=====================================================================*/
void UpdateGameTackle1()
{
	PrintDebugProc("タックル１フェーズ");

	// 次のフェーズに行く
	if (GetKeyboardTrigger(DIK_RETURN))
	{	// タックル2
		GoNextPhase(GetPhaseGameTackle2Func());
	}

	GetPlayerFuncX()->Update();
}

/*=====================================================================
GameTackle1描画関数
=====================================================================*/
void DrawGameTackle1()
{
	GetPlayerFuncX()->Draw();

}

/*=====================================================================
GameTackle1初期化関数
	戻り値 : void
	引数 :
	bool isFirst		true:リソース読み込み系を含めた初期化処理を行う
							　※ この処理がある場合はmain.cpp内の		  ※
							  ※ InitGameResource関数に引数trueで書くこと ※

						false;リソース開放系以外の初期化処理を行う
=====================================================================*/
void InitGameTackle1(bool isFirst)
{
	if (isFirst == true)
	{
		//---------------------------------------------------------------------
		//	リソース読み込み処理(Create???,Load???,シリーズ)
		//---------------------------------------------------------------------

		GetPlayerFuncX()->Init(true);

		return;
	}

	//---------------------------------------------------------------------
	//	グローバル変数等のステータス書き換え処理
	//---------------------------------------------------------------------

	GetPlayerFuncX()->Init(false);


}

/*=====================================================================
GameTackle1終了化関数
	戻り値 : void
	引数 :
	bool isEnd			true:リソース開放系を含めた終了化処理を行う
							　※ この処理がある場合はmain.cpp内の		    ※
							  ※ UninitGameResource関数に引数trueで書くこと ※

						false;リソース開放系以外の終了化処理を行う	
=====================================================================*/
void UninitGameTackle1(bool isEnd)
{
	//---------------------------------------------------------------------
	//	その他の終了処理
	//---------------------------------------------------------------------

	GetPlayerFuncX()->Uninit(false);



	if (isEnd == false)
	{
		return;
	}
	//---------------------------------------------------------------------
	//	リソース開放処理
	//---------------------------------------------------------------------

	GetPlayerFuncX()->Uninit(true);


}

/*=====================================================================
GameTackle1基本関数群取得関数
=====================================================================*/
PHASE_FUNC* GetPhaseGameTackle1Func()
{
	return &g_PhaseFunc;
}